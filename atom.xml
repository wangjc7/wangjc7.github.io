<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>橙子&#39;s Blog</title>
  
  <subtitle>挑战未知</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-05-16T04:03:05.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>andrew.wang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>mapReduce job hangs</title>
    <link href="http://yoursite.com/2018/05/16/mapReduce-job-hangs/"/>
    <id>http://yoursite.com/2018/05/16/mapReduce-job-hangs/</id>
    <published>2018-05-16T03:56:17.000Z</published>
    <updated>2018-05-16T04:03:05.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h1><p>I tried to run simple word count as MapReduce job，<br>but mapReduce job hangs, waiting for AM container to be allocated.</p><p>Output from job:</p><pre><code>*** START ***15/12/25 17:52:50 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:803215/12/25 17:52:51 WARN mapreduce.JobResourceUploader: Hadoop command-line option parsing not performed. Implement the Tool interface and execute your application with ToolRunner to remedy this.15/12/25 17:52:51 INFO input.FileInputFormat: Total input paths to process : 515/12/25 17:52:52 INFO mapreduce.JobSubmitter: number of splits:515/12/25 17:52:52 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1451083949804_000115/12/25 17:52:53 INFO impl.YarnClientImpl: Submitted application application_1451083949804_000115/12/25 17:52:53 INFO mapreduce.Job: The url to track the job: http://hadoop-droplet:8088/proxy/application_1451083949804_0001/15/12/25 17:52:53 INFO mapreduce.Job: Running job: job_1451083949804_0001</code></pre><p>YarnApplicationState:<br>ACCEPTED: waiting for AM container to be allocated,launched and register with RM.</p><p><img src="https://i.stack.imgur.com/rSXpb.png" alt="Mou icon"></p><h1 id="诊断"><a href="#诊断" class="headerlink" title="诊断"></a>诊断</h1><p>You should check the status of Node managers in your cluster. If the NM nodes are short on disk space then RM will mark them “unhealthy” and those NMs can’t allocate new containers.</p><p>1) Check the Unhealthy nodes: http://&lt;active_RM&gt;:8088/cluster/nodes/unhealthy</p><p>If the “health report” tab says “local-dirs are bad” then it means you need to cleanup some disk space from these nodes.</p><p>2) Check the DFS dfs.data.dir property in hdfs-site.xml. It points the location on local file system where hdfs data is stored.</p><p>3) Login to those machines and use df -h &amp; hadoop fs - du -h commands to measure the space occupied.</p><p>4) Verify hadoop trash and delete it if it’s blocking you. hadoop fs -du -h /user/user_name/.Trash and hadoop fs -rm -r /user/user_name/.Trash/*</p><p>访问：<a href="http://yarn001:8088/cluster/nodes/unhealthy" target="_blank" rel="noopener">http://yarn001:8088/cluster/nodes/unhealthy</a></p><p>发现符合第一种情况，Healthy报告如下：</p><pre><code>1/1 local-dirs are bad: /tmp/hadoop-wang/nm-local-dir;1/1 log-dirs are bad: /Users/wang/soft/hadoop-2.7.5/logs/userlogs </code></pre><p>关于该问题网上说最常见原因是由于节点上的磁盘使用率超出了max-disk-utilization-per-disk-percentage（默认为90.0%）。<br>wangdeMacBook-Pro:hadoop-2.7.5 wang$ df -h</p><pre><code>Filesystem      Size   Used  Avail Capacity   iused   ifree %iused  Mounted on/dev/disk1     465Gi  446Gi   18Gi    97% 117017228 4822386   96%   /</code></pre><p>磁盘使用率已经是79%，确实是这个原因，但是这个可能只是表面原因。可以通过增加磁盘利用率阈值来缓解问题：<br>在yarn-site.xml中填写：</p><pre><code>&lt;property&gt;    &lt;name&gt;yarn.nodemanager.disk-health-checker.max-disk-utilization-per-disk-percentage&lt;/name&gt;    &lt;value&gt;98.5&lt;/value&gt;&lt;/property&gt;</code></pre><p>但是增加阈值的方法治标不治本，迟早有一天会超过你设置的98.5%。<br>建议清理磁盘空间或扩容。<br>over.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;现象&quot;&gt;&lt;a href=&quot;#现象&quot; class=&quot;headerlink&quot; title=&quot;现象&quot;&gt;&lt;/a&gt;现象&lt;/h1&gt;&lt;p&gt;I tried to run simple word count as MapReduce job，&lt;br&gt;but mapReduce jo
      
    
    </summary>
    
      <category term="hadoop" scheme="http://yoursite.com/categories/hadoop/"/>
    
    
      <category term="hadoop" scheme="http://yoursite.com/tags/hadoop/"/>
    
      <category term="mapreduce" scheme="http://yoursite.com/tags/mapreduce/"/>
    
  </entry>
  
  <entry>
    <title>单链表反转(Java)</title>
    <link href="http://yoursite.com/2018/05/15/%E5%8D%95%E9%93%BE%E8%A1%A8%E5%8F%8D%E8%BD%AC-Java/"/>
    <id>http://yoursite.com/2018/05/15/单链表反转-Java/</id>
    <published>2018-05-15T15:52:04.000Z</published>
    <updated>2018-05-15T15:54:17.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="单链表反转-Java"><a href="#单链表反转-Java" class="headerlink" title="单链表反转(Java)"></a>单链表反转(Java)</h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p><strong>单链表反转</strong>使用p、q、r三个指针配合工作，使得两个节点间的指向反向，同时用r记录剩下的链表。基本流程如下图所示：</p><p><img src="https://upload-images.jianshu.io/upload_images/5266042-f6c75291059014f6.jpg" alt=""></p><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">public class ReverseList &#123;</span><br><span class="line">    public static <span class="keyword">Node</span> <span class="title">reverseList</span>(<span class="keyword">Node</span> <span class="title">head</span>) &#123;</span><br><span class="line">        <span class="keyword">Node</span> <span class="title">p</span> = new <span class="keyword">Node</span><span class="title">(0</span>);</span><br><span class="line">        <span class="keyword">Node</span> <span class="title">q</span> = new <span class="keyword">Node</span><span class="title">(0</span>);</span><br><span class="line">        <span class="keyword">Node</span> <span class="title">r</span> = new <span class="keyword">Node</span><span class="title">(0</span>);</span><br><span class="line">        p = head;</span><br><span class="line">        q = head.next;</span><br><span class="line">        p.next = null;</span><br><span class="line"></span><br><span class="line">        while (q != null) &#123;</span><br><span class="line">            r = q.next;</span><br><span class="line">            q.next = p;</span><br><span class="line">            p = q;</span><br><span class="line">            q = r;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        head = p;</span><br><span class="line"></span><br><span class="line">        return head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">        int count = <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">Node</span> <span class="title">t</span> = new <span class="keyword">Node</span><span class="title">(1</span>);</span><br><span class="line">        <span class="keyword">Node</span> <span class="title">x</span> = t;</span><br><span class="line"></span><br><span class="line">        for (int i = <span class="number">2</span>; i <span class="tag">&lt;= count; i++) &#123;</span></span><br><span class="line"><span class="tag">            x = (x.next = new Node(i));</span></span><br><span class="line"><span class="tag">        &#125;</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        t = reverseList(t);</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        while (t != null) &#123;</span></span><br><span class="line"><span class="tag">            System.out.print(t.val + " ");</span></span><br><span class="line"><span class="tag">            t = t.next;</span></span><br><span class="line"><span class="tag">        &#125;</span></span><br><span class="line"><span class="tag">    &#125;</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    public static class Node &#123;</span></span><br><span class="line"><span class="tag">        int val;</span></span><br><span class="line"><span class="tag">        Node next;</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        Node(int v) &#123;</span></span><br><span class="line"><span class="tag">            val = v;</span></span><br><span class="line"><span class="tag">        &#125;</span></span><br><span class="line"><span class="tag">    &#125;</span></span><br><span class="line"><span class="tag">&#125;</span></span><br></pre></td></tr></table></figure><p>转载：<br><a href="http://www.jianshu.com/p/5043be2fc875" target="_blank" rel="noopener">http://www.jianshu.com/p/5043be2fc875</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;单链表反转-Java&quot;&gt;&lt;a href=&quot;#单链表反转-Java&quot; class=&quot;headerlink&quot; title=&quot;单链表反转(Java)&quot;&gt;&lt;/a&gt;单链表反转(Java)&lt;/h1&gt;&lt;h2 id=&quot;原理&quot;&gt;&lt;a href=&quot;#原理&quot; class=&quot;header
      
    
    </summary>
    
      <category term="algorithm" scheme="http://yoursite.com/categories/algorithm/"/>
    
    
      <category term="singly linked list" scheme="http://yoursite.com/tags/singly-linked-list/"/>
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2018/05/13/hello-world/"/>
    <id>http://yoursite.com/2018/05/13/hello-world/</id>
    <published>2018-05-13T13:45:12.000Z</published>
    <updated>2018-05-13T13:45:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="hello" scheme="http://yoursite.com/categories/hello/"/>
    
    
      <category term="hellotag" scheme="http://yoursite.com/tags/hellotag/"/>
    
  </entry>
  
  <entry>
    <title>java code</title>
    <link href="http://yoursite.com/2018/05/13/a/"/>
    <id>http://yoursite.com/2018/05/13/a/</id>
    <published>2018-05-13T13:43:33.000Z</published>
    <updated>2018-05-13T13:43:33.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"ok"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
      
    
    </summary>
    
      <category term="test" scheme="http://yoursite.com/categories/test/"/>
    
    
      <category term="aaa" scheme="http://yoursite.com/tags/aaa/"/>
    
  </entry>
  
  <entry>
    <title>demo1</title>
    <link href="http://yoursite.com/2018/05/13/demo1/"/>
    <id>http://yoursite.com/2018/05/13/demo1/</id>
    <published>2018-05-13T06:10:20.000Z</published>
    <updated>2018-05-13T12:48:18.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="demo" scheme="http://yoursite.com/categories/demo/"/>
    
    
      <category term="demotag" scheme="http://yoursite.com/tags/demotag/"/>
    
  </entry>
  
</feed>
